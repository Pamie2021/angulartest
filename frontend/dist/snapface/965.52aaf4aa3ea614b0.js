"use strict";(self.webpackChunksnapface=self.webpackChunksnapface||[]).push([[965],{965:(L,h,s)=>{s.r(h),s.d(h,{FaceSnapsModule:()=>k});var c=s(9808),p=s(2382),r=s(7546),d=s(8505),n=s(1223),u=s(4004),m=s(3900),x=s(520);let l=(()=>{class e{constructor(t){this.http=t}getAllFaceSnaps(){return this.http.get("http://localhost:3000/facesnaps")}getFaceSnapById(t){return this.http.get(`http://localhost:3000/facesnaps/${t}`)}snapFaceSnapById(t,a){return this.getFaceSnapById(t).pipe((0,u.U)(i=>Object.assign(Object.assign({},i),{snaps:i.snaps+("Like"===a?1:-1)})),(0,m.w)(i=>this.http.put(`http://localhost:3000/facesnaps/${t}`,i)))}addFaceSnap(t){return this.getAllFaceSnaps().pipe((0,u.U)(a=>[...a].sort((i,f)=>i.id-f.id)),(0,u.U)(a=>a[a.length-1]),(0,u.U)(a=>Object.assign(Object.assign({},t),{snaps:0,createdDate:new Date,id:a.id+1})),(0,m.w)(a=>this.http.post("http://localhost:3000/facesnaps",a)))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(x.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function S(e,o){if(1&e&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&e){const t=n.oxw().ngIf;n.xp6(1),n.hij("Photo Prise \xe0 ",t.location,"")}}const b=function(e){return{snapped:e}},_=function(e){return{color:e}};function C(e,o){if(1&e){const t=n.EpF();n.TgZ(0,"div",1)(1,"h2"),n._uU(2),n.ALo(3,"titlecase"),n.qZA(),n.TgZ(4,"a",2),n._uU(5,"Back"),n.qZA(),n.TgZ(6,"p"),n._uU(7),n.ALo(8,"date"),n.qZA(),n._UZ(9,"img",3),n.TgZ(10,"p"),n._uU(11),n.qZA(),n.YNc(12,S,2,1,"p",4),n.TgZ(13,"p")(14,"button",5),n.NdJ("click",function(){const f=n.CHM(t).ngIf;return n.oxw().onSnap(f.id)}),n._uU(15),n.qZA(),n.TgZ(16,"span",6),n._uU(17),n.qZA()()()}if(2&e){const t=o.ngIf,a=n.oxw();n.Q6J("ngClass",n.VKq(15,b,"Oops, un Like!"===a.buttonText)),n.xp6(2),n.Oqu(n.lcZ(3,10,t.title)),n.xp6(5),n.hij("Mis en ligne ",n.xi3(8,12,t.createdDate,"\xe0 HH:mm, le d MMMM yyyy"),""),n.xp6(2),n.Q6J("src",t.imageUrl,n.LSH)("alt",t.title),n.xp6(2),n.Oqu(t.description),n.xp6(1),n.Q6J("ngIf",t.location),n.xp6(3),n.Oqu(a.buttonText),n.xp6(1),n.Q6J("ngStyle",n.VKq(17,_,"rgb(0, "+t.snaps+", 0)")),n.xp6(1),n.hij("\u{1f90c} ",t.snaps,"")}}let F=(()=>{class e{constructor(t,a){this.faceSnapsService=t,this.route=a}ngOnInit(){this.buttonText="Like!",this.faceSnap$=this.faceSnapsService.getFaceSnapById(+this.route.snapshot.params.id)}onSnap(t){"Like!"===this.buttonText?this.faceSnapsService.snapFaceSnapById(t,"Like").pipe((0,d.b)(()=>{this.faceSnap$=this.faceSnapsService.getFaceSnapById(t),this.buttonText="Oops, un Like!"})).subscribe():this.faceSnapsService.snapFaceSnapById(t,"unLike").pipe((0,d.b)(()=>{this.faceSnap$=this.faceSnapsService.getFaceSnapById(t),this.buttonText="Like!"})).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(l),n.Y36(r.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-single-face-snap"]],decls:2,vars:3,consts:[["class","face-snap-card",3,"ngClass",4,"ngIf"],[1,"face-snap-card",3,"ngClass"],["routerLink","/facesnaps"],[3,"src","alt"],[4,"ngIf"],[3,"click"],[3,"ngStyle"]],template:function(t,a){1&t&&(n.YNc(0,C,18,19,"div",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,a.faceSnap$))},directives:[c.O5,c.mk,r.yS,c.PC],pipes:[c.Ov,c.rS,c.uU],styles:[".face-snap-card[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin:20px auto;padding:10px 30px;box-shadow:#b4b0b0 4px 4px 20px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:16px}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;box-sizing:border-box;padding:5px 10px;border:none;box-shadow:#5e9de6 3px 3px 7px;margin-right:20px;outline:none;font-size:14px;font-weight:500}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(1px,1px);box-shadow:#1394cb 0 0 5px}.snapped[_ngcontent-%COMP%]{background-color:#b5eff966;color:#60bce3}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:#aecff4 3px 3px 7px;color:#415e93}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{box-shadow:#88c5db 0 0 5px}"]}),e})();const O=function(e){return{snapped:e}};let v=(()=>{class e{constructor(t,a){this.faceSnapsService=t,this.router=a}ngOnInit(){this.buttonText="Like!"}onSnap(){"Like!"===this.buttonText?(this.faceSnapsService.snapFaceSnapById(this.faceSnap.id,"Like"),this.buttonText="Oops, un Like!"):(this.faceSnapsService.snapFaceSnapById(this.faceSnap.id,"unLike"),this.buttonText="Like!")}onViewFaceSnap(){this.router.navigateByUrl(`facesnaps/${this.faceSnap.id}`)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(l),n.Y36(r.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-face-snap"]],inputs:{faceSnap:"faceSnap"},decls:8,vars:7,consts:[[1,"face-snap-card",3,"ngClass"],[3,"click"]],template:function(t,a){1&t&&(n.TgZ(0,"div",0)(1,"h2"),n._uU(2),n.ALo(3,"titlecase"),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.qZA(),n.TgZ(6,"button",1),n.NdJ("click",function(){return a.onViewFaceSnap()}),n._uU(7,"VIEW"),n.qZA()()),2&t&&(n.Q6J("ngClass",n.VKq(5,O,"Oops, un Like!"===a.buttonText)),n.xp6(2),n.Oqu(n.lcZ(3,3,a.faceSnap.title)),n.xp6(3),n.Oqu(a.faceSnap.description))},directives:[c.mk],pipes:[c.rS],styles:[".face-snap-card[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin:20px auto;padding:10px 30px;box-shadow:#b4b0b0 4px 4px 20px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:16px}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;box-sizing:border-box;padding:5px 10px;border:none;box-shadow:#5e9de6 3px 3px 7px;margin-right:20px;outline:none;font-size:14px;font-weight:500}.face-snap-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translate(1px,1px);box-shadow:#1394cb 0 0 5px}.snapped[_ngcontent-%COMP%]{background-color:#b5eff966;color:#60bce3}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:#aecff4 3px 3px 7px;color:#415e93}.snapped[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{box-shadow:#88c5db 0 0 5px}"]}),e})();function M(e,o){1&e&&n._UZ(0,"app-face-snap",1),2&e&&n.Q6J("faceSnap",o.$implicit)}let Z=(()=>{class e{constructor(t){this.faceSnapsService=t}ngOnInit(){this.faceSnaps$=this.faceSnapsService.getAllFaceSnaps()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-face-snap-list"]],decls:2,vars:3,consts:[[3,"faceSnap",4,"ngFor","ngForOf"],[3,"faceSnap"]],template:function(t,a){1&t&&(n.YNc(0,M,1,1,"app-face-snap",0),n.ALo(1,"async")),2&t&&n.Q6J("ngForOf",n.lcZ(1,1,a.faceSnaps$))},directives:[c.sg,v],pipes:[c.Ov],styles:[""]}),e})();function y(e,o){if(1&e&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&e){const t=n.oxw().ngIf;n.xp6(1),n.hij("Photo prise \xe0 ",t.location,"")}}function w(e,o){if(1&e&&(n.TgZ(0,"div",14)(1,"h2"),n._uU(2),n.ALo(3,"uppercase"),n.qZA(),n.TgZ(4,"p"),n._uU(5),n.ALo(6,"date"),n.qZA(),n._UZ(7,"img",15),n.TgZ(8,"p"),n._uU(9),n.qZA(),n.YNc(10,y,2,1,"p",16),n.qZA()),2&e){const t=o.ngIf;n.xp6(2),n.Oqu(n.lcZ(3,6,t.title)),n.xp6(3),n.hij("Mis en ligne ",n.xi3(6,8,t.createdDate,"\xe0 HH:mm, le d MMMM yyyy"),""),n.xp6(2),n.Q6J("src",t.imageUrl,n.LSH)("alt",t.title),n.xp6(2),n.Oqu(t.description),n.xp6(1),n.Q6J("ngIf",t.location)}}let P=(()=>{class e{constructor(t,a,i){this.formBuilder=t,this.faceSnapsService=a,this.router=i}ngOnInit(){this.urlRegex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)/,this.snapForm=this.formBuilder.group({title:[null,[p.kI.required]],description:[null,[p.kI.required]],imageUrl:[null,[p.kI.required,p.kI.pattern(this.urlRegex)]],location:[null]},{updateOn:"blur"}),this.faceSnapPreview$=this.snapForm.valueChanges.pipe((0,u.U)(t=>Object.assign(Object.assign({},t),{createdDate:new Date,snaps:0,id:0})))}onSubmitForm(){this.faceSnapsService.addFaceSnap(this.snapForm.value).pipe((0,d.b)(()=>this.router.navigateByUrl("/facesnaps"))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.qu),n.Y36(l),n.Y36(r.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-new-face-snap"]],decls:26,vars:5,consts:[[1,"form-card"],[3,"formGroup"],[1,"form-group"],["for","title"],["id","title","type","text","formControlName","title"],["for","description"],["id","description","type","text","formControlName","description","rows","4"],["for","imageUrl"],["id","imageUrl","type","text","formControlName","imageUrl"],["for","location"],["id","location","type","text","formControlName","location"],[1,"action-buttons"],["type","submit",3,"disabled","click"],["class","face-snap-card",4,"ngIf"],[1,"face-snap-card"],[3,"src","alt"],[4,"ngIf"]],template:function(t,a){1&t&&(n.TgZ(0,"div",0)(1,"h2"),n._uU(2,"NOUVEAU FACESNAP"),n.qZA(),n.TgZ(3,"form",1)(4,"div",2)(5,"label",3),n._uU(6,"Titre"),n.qZA(),n._UZ(7,"input",4),n.qZA(),n.TgZ(8,"div",2)(9,"label",5),n._uU(10,"Description"),n.qZA(),n.TgZ(11,"textarea",6),n._uU(12,"            "),n.qZA()(),n.TgZ(13,"div",2)(14,"label",7),n._uU(15,"URL de l'image"),n.qZA(),n._UZ(16,"input",8),n.qZA(),n.TgZ(17,"div",2)(18,"label",9),n._uU(19,"Lieu"),n.qZA(),n._UZ(20,"input",10),n.qZA(),n.TgZ(21,"div",11)(22,"button",12),n.NdJ("click",function(){return a.onSubmitForm()}),n._uU(23,"Enregistrer"),n.qZA()()()(),n.YNc(24,w,11,11,"div",13),n.ALo(25,"async")),2&t&&(n.xp6(3),n.Q6J("formGroup",a.snapForm),n.xp6(19),n.Q6J("disabled",a.snapForm.invalid),n.xp6(2),n.Q6J("ngIf",n.lcZ(25,3,a.faceSnapPreview$)))},directives:[p._Y,p.JL,p.sg,p.Fj,p.JJ,p.u,c.O5],pipes:[c.Ov,c.gd,c.uU],styles:[".form-card[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin:20px auto;padding:10px 30px;box-shadow:#d3d3d3 4px 4px 20px;background-color:#d1eda7}.form-group[_ngcontent-%COMP%]{margin:10px auto;width:80%;display:flex;align-items:center;justify-content:space-between}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:50%}.action-buttons[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{display:block;margin:20px auto;background-color:#f0f8ff}.form-card[_ngcontent-%COMP%], .face-snap-card[_ngcontent-%COMP%]{box-sizing:border-box;width:50%;margin:20px auto;padding:10px 30px;box-shadow:#d3d3d3 4px 4px 20px}.face-snap-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.face-snap-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:0}.face-snap-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:300;font-size:16px}"]}),e})();var A=s(263);let g=(()=>{class e{constructor(t,a){this.auth=t,this.router=a}canActivate(t,a){return!!this.auth.getToken()||(this.router.navigateByUrl("/auth/login"),!1)}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(A.e),n.LFG(r.F0))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const U=[{path:"create",component:P,canActivate:[g]},{path:":id",component:F,canActivate:[g]},{path:"",component:Z,canActivate:[g]}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[r.Bz.forChild(U)],r.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[c.ez,p.UX,T]]}),e})()}}]);